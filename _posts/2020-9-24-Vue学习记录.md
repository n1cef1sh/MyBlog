---
layout: post
title: "Vue学习记录"
categories: [Vue]

---

## 配置
使用淘宝npm镜像
 
```
$ npm install -g cnpm --registry=https://registry.npm.taobao.org
```
全局安装 vue-cli

```
$ cnpm install --global vue-cli
```
创建一个基于 webpack 模板的新项目

```
$ vue init webpack my-project
```
需要进行一些配置，默认回车即可

在安装过程中始终出现各种错误，查找资料和文档尝试了很多方法未果。最后换了热点重新下载配置即可，这里不得不要感慨一下校园网的网络质量……  

![QQ截图20200922151954.png](https://i.loli.net/2020/09/22/utHbUaWxF6vmIw5.png)
![QQ截图20200922151943.png](https://i.loli.net/2020/09/22/zsdwGYch2L8xmRA.png)

如图所示，最终成功使用npm安装并运行了项目。然后先git到github方便后面同步学习。


## 起步
### 声明式渲染
Vue.js 的核心是一个允许采用简洁的模板语法来声明式地将数据渲染进 DOM 的系统。  
一个 Vue 应用会将其挂载到一个 DOM 元素上 (对于这个例子是 #app或#app2) 然后对其进行完全控制。那个 HTML 是我们的入口，但其余都会发生在新创建的 Vue 实例内部。


```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>test for myvue</title>
    <script src = "vue.js" type="text/javascript" charset="UTF-8"></script>
</head>
<body>
    <div id="app">
        {{message}}
    </div>
    <script type="text/javascript">
    var app = new Vue({
        el:'#app',
        data:{
            message:'test for myvue'
        }
    })
    </script>
    
    <div id ="app-2">
        <sapn v-bind:title="message">
            悬停此处查看信息
        </sapn>
    </div>
    <script type="text/javascript">
        var app2 = new Vue({
            el:'#app-2',
            data:{
                message:"页面加载于" + new Date().toLocaleString()
            }
        })
    </script>
</body>
</html>
```
- 数据和DOM已经建立了关联，所有东西都是响应式的。例如，打开浏览器控制台，修改app.message的值，上例显示的内容也会相应地更新。
- 指令带有前缀的v-是Vue提供的特殊attribute，会在渲染的DOM上应用特殊的响应式行为。

### 条件和循环


```
    <div id ="app3">
        <p v-if="seen">now you see me</p>
    </div>
    <script type="text/javascript">
    var app3 = new Vue({
        el:'#app3',
        data:{
            seen:true
        }
    })
    </script>
```
- 控制台输入app3.seen=false，之前显示的消息会消失
- 此例说明可以把数据绑定到DOM结构，不仅仅可以绑定到DOM文本或attribute


```
    <div id="app-4">
        <ol>
            <li v-for="todo in todos">
                {{todo.text}}
            </li>
        </ol>
    </div>
    <script type="text/javascript">
    var app4 = new Vue({
        el:"#app-4",
        data:{
            todos:[
                {text: 'learn JS'},
                {text: 'learn Vue'}
            ]
        }
    })
    </script>
```
- < ol> 标签，有序 HTML 列表。
- < li> 标签定义列表项目，可用在有序列表 (< ol>) 和无序列表 (< ul>) 中。
- v-for 指令可以绑定数组的数据来渲染一个项目列表
- 在控制台里，输入 app4.todos.push({ text: 'leran to add' })，列表最后会相应增加。

### 处理用户输入
```
    <div id="app-5">
        <p>{{message}}</p>
        <button v-on:click="reverseMessage">reverse this message</button>
    </div>
    <script type="text/javascript">
    var app5 =new Vue({
        el:'#app-5',
        data:{
            message:'hello bro'
        },
        methods:{
            reverseMessage:function(){
                this.message = this.message.split('').reverse().join('')
            }
        }
    })
    </script>
```
- v-on指令添加事件监听器，去调用方法
- 此例中，所有的 DOM 操作都由 Vue 来处理，编写代码只需要关注逻辑层面即可。

### 实例

```
    <div id ="test1">
        {{a}}
    </div>
    <script type="text/javascript">
    var data = {a:1};
    var vm = new Vue({
        el: '#test1',
        data : data
    })
    // 获得这个实例上的 property
// 返回源数据中对应的字段
vm.a == data.a // => true

// 设置 property 也会影响到原始数据
vm.a = 2
data.a // => 2

// ……反之亦然
data.a = 3
vm.a // => 3
```
- 只有当实例被创建时就已经存在于 data 中的 property 才是响应式的，如果添加一个新的property，对其改动将不会触发任何视图的更新。
- Object.freeze()可以阻止修改现有的 property，也意味着响应系统无法再追踪变化。

```
var obj = {
  foo: 'bar'
}

Object.freeze(obj)
```
除了数据 property，Vue 实例还暴露了一些有用的实例 property 与方法。它们都有前缀 $，以便与用户定义的 property 区分开来。

```
    vm.$data === data
    vm.$el === document.getElementById('test1')

    vm.$watch('a', function(newValue, oldValue){
        //此回调将在'vm.a'改变后调用
    }
```
- watch可以观察旧值和新值的变化情况

### 生命周期
此处先放图，后期学习过程中再结合理解。
![lifecycle.png](https://i.loli.net/2020/09/24/Y1FPcLhw2EJZkIX.png)

## 模板语法
### 插值
#### 文本
- “Mustache”语法{{}}将数据解释为普通文本
- 使用v-once指令，可以执行一次性插值

#### 原始html
- v-html指令输出原始html

```
    <div id="test2" v-once>
        <p>Using mustaches: {{ rawHtml }}</p>
        <p>Using v-html directive: <span v-html = "rawHtml"></span></p>
        ///上行也可以简写为<p v-html = "rawHtml"></p>
    </div>
    <script type="text/javascript">
    var vm2 = new Vue({
        el:'#test2',
        data:{
            rawHtml:'<span style="color:red">This should be red.</span>'
        }
    })
```
输出效果为  
![QQ截图20200925144813.png](https://i.loli.net/2020/09/25/gqivJG5nICusTp1.png)

#### attribute
v-bind给标签绑定属性，例如

```
    <div id="test2" v-once>
        <div v-bind:class ="color">test...</div>
    </div>
    <script type="text/javascript">
    var vm2 = new Vue({
        el:'#test2',
        data:{
            color: 'red'
        }
    })
    </script>
```
此时文本并未变成红色，但是元素标签已经有该属性了  
![QQ截图20200925151314.png](https://i.loli.net/2020/09/25/f92gwhR1qSeOWQu.png)  
需要对样式进行设置

```
    <style type="text/css">
        .red{color:red;}
        .blue{color:blue; font-size:100px;}
    </style>
```
即可实现动态属性的绑定。

### 指令
- 在指令名称之后用冒号表示后面是接受的参数
```
<a v-bind:href="url">...</a>
```
- 动态参数：可以用方括号括起来的JS表达式作为参数

```
<a v-on:[eventName]="doSomething"> ... </a>

```
当 eventName 的值为 "focus" 时，v-on:[eventName] 将等价于 v-on:focus。

- 在 DOM 中使用模板时 (直接在一个 HTML 文件里撰写模板)，还需要避免使用大写字符来命名键名，因为浏览器会把 attribute 名全部强制转为小写

### 缩写
v-bind

```
<!-- 完整语法 -->
<a v-bind:href="url">...</a>

<!-- 缩写 -->
<a :href="url">...</a>

<!-- 动态参数的缩写 (2.6.0+) -->
<a :[key]="url"> ... </a>
```
v-on

```
<!-- 完整语法 -->
<a v-on:click="doSomething">...</a>

<!-- 缩写 -->
<a @click="doSomething">...</a>

<!-- 动态参数的缩写 (2.6.0+) -->
<a @[event]="doSomething"> ... </a>
```

## 计算属性






## 参考
[Vue文档](https://cn.vuejs.org/)

